<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Glosario Teol√≥gico Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Paleta de Colores Teol√≥gicos Mejorada */
        :root {
            --dark-header: #1e293b;
            --accent-blue: #3b82f6;
            --A: #e6194B; --B: #3cb44b; --C: #d48a00; --D: #4363d8; --E: #f58231;
            --F: #911eb4; --G: #00a3cc; --H: #f032e6; --I: #808000; --J: #a11d33;
            --K: #469990; --L: #6a329f; --M: #9a6324; --N: #000075; --O: #800000;
            --P: #006400; --Q: #998500; --R: #b35a00; --S: #000075; --T: #333333;
            --U: #e6194b; --V: #008080; --W: #6f42c1; --X: #886a00; --Y: #005a70; --Z: #004d00;
        }

        body { background-color: #f8fafc !important; font-family: 'Times New Roman', serif; }

        .header-glosario { 
            background: var(--dark-header); 
            color: white; 
            padding: 15px 0; 
            border-bottom: 3px solid var(--accent-blue); 
        }

        .btn-accion { border-radius: 8px; font-weight: bold; transition: 0.3s; border: none; }
        .btn-copiar { background: var(--accent-blue); color: white; box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4); }
        .btn-limpiar { background: #ef4444; color: white; }

        /* Estilos de Letras */
        [class^="letra-"] { border-left: 8px solid; font-weight: bold; transition: 0.2s; }
        .letra-A { border-color: var(--A); color: var(--A); } .letra-B { border-color: var(--B); color: var(--B); }
        .letra-C { border-color: var(--C); color: var(--C); } .letra-D { border-color: var(--D); color: var(--D); }
        .letra-E { border-color: var(--E); color: var(--E); } .letra-F { border-color: var(--F); color: var(--F); }
        .letra-G { border-color: var(--G); color: var(--G); } .letra-H { border-color: var(--H); color: var(--H); }
        .letra-I { border-color: var(--I); color: var(--I); } .letra-J { border-color: var(--J); color: var(--J); }
        .letra-K { border-color: var(--K); color: var(--K); } .letra-L { border-color: var(--L); color: var(--L); }
        .letra-M { border-color: var(--M); color: var(--M); } .letra-N { border-color: var(--N); color: var(--N); }
        .letra-O { border-color: var(--O); color: var(--O); } .letra-P { border-color: var(--P); color: var(--P); }
        .letra-Q { border-color: var(--Q); color: var(--Q); } .letra-R { border-color: var(--R); color: var(--R); }
        .letra-S { border-color: var(--S); color: var(--S); } .letra-T { border-color: var(--T); color: var(--T); }
        .letra-U { border-color: var(--U); color: var(--U); } .letra-V { border-color: var(--V); color: var(--V); }
        .letra-W { border-color: var(--W); color: var(--W); } .letra-X { border-color: var(--X); color: var(--X); }
        .letra-Y { border-color: var(--Y); color: var(--Y); } .letra-Z { border-color: var(--Z); color: var(--Z); }

        .accordion-button:not(.collapsed) { background-color: #f1f5f9 !important; }
        .accordion-button { font-size: 1.15rem !important; }
        .cat-badge { font-size: 0.7rem; background: #e2e8f0; color: #475569; padding: 4px 12px; border-radius: 20px; margin-left: auto; text-transform: uppercase; font-weight: 800; }
        
        .btn-flotante {
            position: fixed; bottom: 25px; right: 25px; width: 55px; height: 55px;
            border-radius: 50%; background: #fbbf24; border: none; font-size: 24px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.25); z-index: 1000; transition: 0.3s;
        }
        .btn-flotante:active { transform: scale(0.9); }

        @media (min-width: 768px) {
            .btn-flotante { width: auto; height: auto; border-radius: 12px; padding: 12px 25px; font-size: 0.95rem; }
            .btn-flotante::after { content: " A√ëADIR T√âRMINO"; font-weight: bold; margin-left: 8px; }
        }

        .busqueda-container { position: sticky; top: 0; z-index: 900; background: #f8fafc; padding-bottom: 10px; }
    </style>
</head>
<body class="bg-light">

<header class="header-glosario no-print shadow-sm">
    <div class="container-fluid px-4 d-flex flex-wrap justify-content-between align-items-center gap-3">
        <div>
            <h1 class="h4 mb-0 fw-bold">üìñ Glosario Teol√≥gico</h1>
            <small class="opacity-75">Conceptos y Etimolog√≠as</small>
        </div>
        <div class="d-flex gap-2">
            <a href="index.html" class="btn btn-accion btn-outline-light btn-sm">üîô Inicio</a>
            <button class="btn btn-accion btn-copiar btn-sm shadow-sm" onclick="copiarPalabras()">üìã Copiar Todo</button>
            <button class="btn btn-accion btn-limpiar btn-sm shadow-sm" onclick="limpiarTodo()">üóëÔ∏è</button>
        </div>
    </div>
</header>

<div class="container-fluid px-4 mt-3">
    <div class="busqueda-container">
        <input type="text" id="busqueda" class="form-control form-control-lg border-0 shadow-sm" 
               style="border-radius: 12px;" placeholder="üîç Buscar t√©rmino b√≠blico..." onkeyup="filtrar()">
    </div>
    
    <div class="accordion mt-3" id="contenedorGlosario"></div>
    
    <div id="vacio" class="text-center p-5 mt-4 bg-white rounded shadow-sm border" style="display:none;">
        <h4 class="text-muted fw-bold">Sin t√©rminos registrados</h4>
        <p class="mb-0">Comienza a√±adiendo palabras clave en Griego o Hebreo.</p>
    </div>
</div>

<button class="btn btn-flotante no-print" onclick="nuevo()">‚ûï</button>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let datos = JSON.parse(localStorage.getItem('glosario_color_v1')) || [];

    function cargar() {
        const c = document.getElementById('contenedorGlosario');
        const v = document.getElementById('vacio');
        c.innerHTML = "";
        if (datos.length === 0) { v.style.display = "block"; return; }
        v.style.display = "none";
        
        // Ordenar alfab√©ticamente
        datos.sort((a,b) => a.palabra.localeCompare(b.palabra));

        datos.forEach((item, i) => {
            const letra = item.palabra.charAt(0).toUpperCase();
            const id = `c${i}`;
            const color = getComputedStyle(document.documentElement).getPropertyValue(`--${letra}`).trim() || "#333";
            
            c.innerHTML += `
                <div class="accordion-item border-0 mb-3 shadow-sm rounded overflow-hidden">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed letra-${letra}" type="button" data-bs-toggle="collapse" data-bs-target="#${id}">
                            <span style="color:${color}">${item.palabra}</span> 
                            <span class="cat-badge">${item.cat}</span>
                        </button>
                    </h2>
                    <div id="${id}" class="accordion-collapse collapse">
                        <div class="accordion-body bg-white border-top">
                            <p class="fs-5 mb-3 text-dark" style="line-height:1.6">${item.definicion}</p>
                            <div class="d-flex justify-content-end gap-3 no-print border-top pt-2">
                                <button class="btn btn-sm btn-link text-primary text-decoration-none fw-bold" onclick="editar(${i})">‚úèÔ∏è EDITAR</button>
                                <button class="btn btn-sm btn-link text-danger text-decoration-none fw-bold" onclick="borrar(${i})">üóëÔ∏è BORRAR</button>
                            </div>
                        </div>
                    </div>
                </div>`;
        });
    }

    function copiarPalabras() {
        if (datos.length === 0) return alert("Glosario vac√≠o");

        const tempDiv = document.createElement("div");
        tempDiv.style.position = "fixed";
        tempDiv.style.left = "-9999px";
        document.body.appendChild(tempDiv);

        let htmlFinal = `<div style="font-family: 'Times New Roman', serif; padding: 10px;">`;
        datos.forEach(item => {
            const letra = item.palabra.charAt(0).toUpperCase();
            const color = getComputedStyle(document.documentElement).getPropertyValue(`--${letra}`).trim() || "#1e293b";
            
            htmlFinal += `
                <div style="margin-bottom: 20px; border-left: 5px solid ${color}; padding-left: 15px;">
                    <strong style="color: ${color}; font-size: 16pt; text-transform: uppercase;">${item.palabra}</strong>
                    <i style="font-size: 10pt; color: #64748b; margin-left: 10px;">(${item.cat})</i>
                    <div style="font-size: 13pt; color: #1e293b; margin-top: 5px;">${item.definicion}</div>
                </div>`;
        });
        htmlFinal += `</div>`;

        tempDiv.innerHTML = htmlFinal;

        const range = document.createRange();
        range.selectNode(tempDiv);
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(range);

        try {
            document.execCommand('copy');
            alert("‚úÖ Glosario copiado con formato. Ya puedes pegarlo en tu bosquejo.");
        } catch (err) {
            alert("Error al copiar.");
        }

        window.getSelection().removeAllRanges();
        document.body.removeChild(tempDiv);
    }

    function nuevo() {
        const p = prompt("T√©rmino / Palabra:"); if(!p) return;
        const d = prompt("Definici√≥n Teol√≥gica:"); if(!d) return;
        const c = prompt("Categor√≠a (Griego, Hebreo, Doctrina...):") || "General";
        datos.push({palabra: p, definicion: d, cat: c});
        guardar();
    }

    function editar(i) {
        datos[i].palabra = prompt("Palabra:", datos[i].palabra) || datos[i].palabra;
        datos[i].definicion = prompt("Definici√≥n:", datos[i].definicion) || datos[i].definicion;
        datos[i].cat = prompt("Categor√≠a:", datos[i].cat) || datos[i].cat;
        guardar();
    }

    function borrar(i) { if(confirm("¬øEliminar este t√©rmino?")) { datos.splice(i,1); guardar(); } }
    function limpiarTodo() { if(confirm("¬øEliminar todo el glosario?")) { datos = []; guardar(); } }
    function guardar() { localStorage.setItem('glosario_color_v1', JSON.stringify(datos)); cargar(); }
    
    function filtrar() {
        const t = document.getElementById('busqueda').value.toLowerCase();
        document.querySelectorAll('.accordion-item').forEach(it => {
            it.style.display = it.innerText.toLowerCase().includes(t) ? "block" : "none";
        });
    }

    window.onload = cargar;
</script>
</body>
</html>
