
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Mis Vers√≠culos - Studio Edition</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        :root { --bible-green: #198754; --dark-green: #0a4d2e; }

        body { background-color: #f0f4f0 !important; font-family: 'Times New Roman', serif; }
        
        /* Navbar con estilo */
        .navbar { background-color: var(--bible-green) !important; border-bottom: 3px solid var(--dark-green); }

        .header-verso { display: flex; align-items: center; width: 100%; gap: 10px; background: white; border-radius: 8px; }
        
        .input-titulo-punto { 
            flex-grow: 1; border: none; outline: none; 
            font-weight: bold; color: var(--dark-green) !important; font-size: 1rem;
        }

        /* Estilo de cita b√≠blica */
        textarea.text-success { 
            font-style: italic; 
            border: none !important;
            border-left: 5px solid var(--bible-green) !important; 
            background-color: #f8fff8 !important;
            border-radius: 0 10px 10px 0;
            padding: 15px;
            resize: none;
            color: #2c3e50 !important;
        }

        .accordion-item { border-radius: 12px !important; margin-bottom: 12px; overflow: hidden; box-shadow: 0 3px 10px rgba(0,0,0,0.05); border: none !important; }

        /* Controles de lectura flotantes */
        #controles-lectura {
            position: fixed; bottom: -120px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 420px; background: var(--dark-green);
            color: white; padding: 15px; border-radius: 20px 20px 0 0;
            display: flex; flex-direction: column; align-items: center;
            transition: bottom 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10000; box-shadow: 0 -5px 25px rgba(0,0,0,0.3);
        }
        #controles-lectura.active { bottom: 0; }

        .btn-zoom {
            background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3);
            color: white; width: 50px; height: 45px; border-radius: 10px; font-weight: bold;
        }

        .btn-add-verso {
            position: fixed; bottom: 25px; right: 25px; width: 60px; height: 60px;
            border-radius: 50%; background: var(--bible-green); color: white;
            border: none; font-size: 28px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 999; transition: 0.3s;
        }
        .btn-add-verso:active { transform: scale(0.9); }

        @media (max-width: 480px) {
            .navbar-brand { font-size: 0.9rem; }
            .input-titulo-punto { font-size: 0.9rem; }
        }
    </style>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark mb-3 shadow-sm no-print">
    <div class="container-fluid px-3">
        <a href="index.html" class="navbar-brand fw-bold">üîô Inicio</a>
        <div class="dropdown">
            <button class="btn btn-light btn-sm dropdown-toggle fw-bold" type="button" data-bs-toggle="dropdown">üìö Recursos</button>
            <ul class="dropdown-menu dropdown-menu-end shadow border-0">
                <li><a class="dropdown-item" href="https://www.escuelabiblica.com/biblia-online.php" target="_blank">üîç Concordancia</a></li>
                <li><a class="dropdown-item" href="https://www.blueletterbible.org/commentaries/mhc/" target="_blank">üìñ Matthew Henry</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><button class="dropdown-item text-success fw-bold" onclick="agregarVersiculo()">‚ûï Nuevo Vers√≠culo</button></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container-fluid px-3 pb-5">
    <div id="contenedorVersos" class="accordion border-0"></div>
</div>

<button class="btn-add-verso no-print shadow" onclick="agregarVersiculo()">‚ûï</button>

<div id="controles-lectura">
    <div id="titulo-lectura-actual" class="small mb-2 text-uppercase fw-bold opacity-75" style="letter-spacing: 1px;">BIBLIA</div>
    <div class="d-flex gap-3 align-items-center">
        <button class="btn-zoom" onmousedown="event.preventDefault()" onclick="cambiarTamanoLetra(-2)">A-</button>
        <div style="width: 1px; height: 30px; background: rgba(255,255,255,0.2);"></div>
        <button class="btn-zoom" onmousedown="event.preventDefault()" onclick="cambiarTamanoLetra(2)">A+</button>
        <button class="btn btn-light btn-sm ms-3 fw-bold" onclick="cerrarLectura()">Cerrar</button>
    </div>
</div>

<script>
let versos = JSON.parse(localStorage.getItem('mis_versos')) || [];
let fontSizeActual = 20;
let elementoActivo = null;

function cargarVersos() {
    const contenedor = document.getElementById('contenedorVersos');
    contenedor.innerHTML = "";
    if (versos.length === 0) {
        contenedor.innerHTML = `<div class="text-center p-5 text-muted"><h4>Sin vers√≠culos guardados</h4><p>Usa el bot√≥n + para empezar</p></div>`;
        return;
    }

    versos.forEach((v, index) => {
        const div = document.createElement('div');
        div.className = "accordion-item border-0";
        div.innerHTML = `
            <h2 class="accordion-header bg-white">
                <div class="header-verso p-2">
                    <button class="btn btn-outline-success btn-sm border-0" type="button" data-bs-toggle="collapse" data-bs-target="#v${index}">üìñ</button>
                    <input type="text" class="input-titulo-punto" value="${v.cita}" 
                           oninput="actualizarVerso(${index}, 'cita', this.value)" placeholder="Ej: Juan 3:16...">
                    <button class="btn btn-link text-danger p-1 text-decoration-none" onclick="borrarVerso(${index})">üóëÔ∏è</button>
                </div>
            </h2>
            <div id="v${index}" class="accordion-collapse collapse" data-bs-parent="#contenedorVersos">
                <div class="accordion-body p-2 bg-white">
                    <textarea class="form-control text-success shadow-inner" rows="6" 
                              oninput="actualizarVerso(${index}, 'texto', this.value)" 
                              onfocus="setLectura(this, '${v.cita || 'VERS√çCULO'}')" placeholder="Escribe el texto b√≠blico aqu√≠...">${v.texto}</textarea>
                </div>
            </div>`;
        contenedor.appendChild(div);
    });
}

function agregarVersiculo() {
    versos.unshift({ cita: "", texto: "" });
    guardarYRefrescar();
    // Abrir autom√°ticamente
    setTimeout(() => {
        const first = document.querySelector('.accordion-collapse');
        if (first) new bootstrap.Collapse(first, { show: true });
    }, 150);
}

function actualizarVerso(index, campo, valor) {
    versos[index][campo] = valor;
    localStorage.setItem('mis_versos', JSON.stringify(versos));
}

function borrarVerso(index) {
    if(confirm("¬øEliminar este vers√≠culo?")) {
        versos.splice(index, 1);
        guardarYRefrescar();
    }
}

function guardarYRefrescar() {
    localStorage.setItem('mis_versos', JSON.stringify(versos));
    cargarVersos();
}

function setLectura(el, titulo) {
    elementoActivo = el;
    const barra = document.getElementById('controles-lectura');
    document.getElementById('titulo-lectura-actual').innerText = titulo || "Editando...";
    barra.classList.add('active');
    el.style.fontSize = fontSizeActual + "px";
}

function cambiarTamanoLetra(delta) {
    fontSizeActual += delta;
    if (fontSizeActual < 14) fontSizeActual = 14;
    if (fontSizeActual > 45) fontSizeActual = 45;
    if (elementoActivo) elementoActivo.style.fontSize = fontSizeActual + "px";
}

function cerrarLectura() { 
    if (elementoActivo) elementoActivo.blur(); 
    document.getElementById('controles-lectura').classList.remove('active');
}

// Cerrar al tocar fuera
document.addEventListener('click', (e) => {
    if (elementoActivo && !e.target.closest('.accordion-item') && !e.target.closest('#controles-lectura') && !e.target.closest('.btn-add-verso')) {
        cerrarLectura();
    }
});

window.onload = cargarVersos;
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
